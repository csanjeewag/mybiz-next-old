{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport Head from 'next/head';\nimport Layout from './../../layouts/MainLayout';\nimport SubNavBar from './../../layouts/SubNavbar';\nimport Footer from './../../components/Footer';\nimport fetch from 'isomorphic-unfetch';\nimport $ from 'jquery';\nimport Cookie from \"js-cookie\";\nimport { Url, web, WebUrl } from './../../constant/main';\n\nclass Index extends Component {\n  constructor() {\n    super();\n\n    _defineProperty(this, \"handleChange\", evt => {\n      // This triggers everytime the input is changed\n      this.setState({\n        [evt.target.name]: evt.target.value\n      });\n    });\n\n    _defineProperty(this, \"handleChangedetails\", evt => {\n      var shopd = this.state.subtype;\n      shopd.find(function (e) {\n        if (e.name == evt.target.name) {\n          e.type = evt.target.value;\n        }\n      });\n      this.setState({\n        subtype: shopd\n      });\n    });\n\n    _defineProperty(this, \"addnewSubtypes\", evt => {\n      if (this.state.newsubtype != '') {\n        var shopd = this.state.subtype;\n        shopd.push({\n          name: this.state.newsubtype,\n          type: ''\n        });\n        this.setState({\n          subtype: shopd,\n          newsubtype: ''\n        });\n        this.componentDidMount();\n      }\n    });\n\n    _defineProperty(this, \"deleteDetals\", type => {\n      if (confirm('is it sure remove ' + type + '?')) {\n        var shopd = this.state.subtype;\n        shopd.splice(shopd.findIndex(function (e) {\n          return e.name == type;\n        }), 1);\n        this.setState({\n          subtype: shopd\n        });\n        this.componentDidMount();\n      }\n    });\n\n    _defineProperty(this, \"validationform\", evt => {\n      this.checkvalidation(evt.target.name);\n    });\n\n    _defineProperty(this, \"checkvalidation\", name => {\n      var form = this.state;\n      var validation = this.state.validation;\n\n      switch (name) {\n        case 'name':\n          validation.name = form.name.length < 1 ? 'name cannot be empty.' : '';\n          break;\n\n        case 'type':\n          validation.type = form.type.length < 1 ? 'type cannot be empty.' : '';\n          break;\n\n        case 'content1':\n          validation.content1 = form.content1.length < 1 ? 'Content cannot be empty.' : '';\n          break;\n      }\n\n      this.setState({\n        validation: validation\n      });\n    });\n\n    _defineProperty(this, \"beforesubmit\", () => {\n      var count = 0;\n      Object.entries(this.state.validation).forEach(([key, value]) => {\n        this.checkvalidation(key);\n      });\n      Object.entries(this.state.validation).forEach(([key, value]) => {\n        if (value != '') {\n          count = count + 1;\n          return 1;\n        }\n      });\n      return count;\n    });\n\n    _defineProperty(this, \"handleSubmit\", evt => {\n      evt.preventDefault(); //check validations\n\n      if (this.beforesubmit() > 0) {\n        alert('Sorry, cannot Submit form, check again form!.');\n      } else if (!Cookie.getJSON('user')) {\n        alert('Sorry, you are not sign in.');\n      } else {\n        const data = new FormData();\n\n        if (this.state.files != undefined) {\n          this.state.files.map((x, i) => {\n            data.append(`image`, x.selectedFile);\n          });\n        }\n\n        var jsonbody = this.state; // jsonbody.files = null;\n        // jsonbody.defaultfilepath = null;\n\n        data.append('jsonbody', JSON.stringify(jsonbody));\n        data.append('mainfile', this.state.mainfile);\n        data.append('user', JSON.stringify(Cookie.getJSON('user')));\n        fetch('/api/updateCatagery/' + this.props.typeid, {\n          method: 'PUT',\n          headers: {},\n          body: data\n        }).then(response => {\n          return response.json();\n        }).then(data => {\n          if (data != undefined) {\n            alert(data.msg);\n          }\n        }).catch(error => console.log(error));\n      }\n    });\n\n    _defineProperty(this, \"mainfileChangeHandler\", event => {\n      if (event.target.files[0]) {\n        this.setState({\n          mainfile: event.target.files[0],\n          mainfilepath: URL.createObjectURL(event.target.files[0])\n        });\n      }\n    });\n\n    _defineProperty(this, \"fileChangeHandler\", event => {\n      if (this.state.selectedFilecount > 2) {\n        var files = this.state.files;\n        files.splice(files.findIndex(function (e) {\n          return e.selectedfilepath == 'https://img.icons8.com/ios/50/01567e/image.png';\n        }), 1);\n        this.setState({\n          files: files,\n          selectedFilecount: this.state.selectedFilecount - 1\n        });\n      }\n\n      if (event.target.files[0] != null) {\n        var files = this.state.files;\n        files.unshift({\n          selectedFile: event.target.files[0],\n          selectedfilepath: URL.createObjectURL(event.target.files[0])\n        });\n        this.setState({\n          files: files,\n          selectedFilecount: this.state.selectedFilecount < 3 ? this.state.selectedFilecount + 1 : 3\n        });\n      }\n    });\n\n    _defineProperty(this, \"deleteFiles\", selectedfilepath => {\n      if (confirm('is it sure remove ?')) {\n        if (this.state.selectedFilecount == 1) {\n          var files = [{\n            selectedFile: null,\n            selectedfilepath: this.state.defaultfilepath\n          }];\n          this.setState({\n            files: files,\n            selectedFilecount: 1\n          });\n        } else {\n          var files = this.state.files;\n          files.splice(files.findIndex(function (e) {\n            return e.selectedfilepath == selectedfilepath;\n          }), 1);\n          this.setState({\n            files: files,\n            selectedFilecount: this.state.selectedFilecount - 1\n          });\n        }\n      }\n    });\n\n    _defineProperty(this, \"deleteImagesinDB\", x => {\n      var deleteimages = this.state.deleteimages;\n\n      if (!deleteimages.includes(x)) {\n        deleteimages.push(x);\n        this.setState({\n          deleteimages: deleteimages\n        });\n      }\n    });\n\n    _defineProperty(this, \"addImagesinDB\", x => {\n      var deleteimages = this.state.deleteimages;\n\n      if (deleteimages.includes(x)) {\n        deleteimages.splice(deleteimages.findIndex(e => e == x), 1);\n        this.setState({\n          deleteimages: deleteimages\n        });\n      }\n    });\n\n    this.state = {\n      name: '',\n      type: '',\n      content1: '',\n      newsubtype: '',\n      mainfile: null,\n      images: [],\n      deleteimages: [],\n      mainfilepath: 'https://img.icons8.com/ios/50/01567e/image.png',\n      subtype: [],\n      selectedFilecount: 1,\n      defaultfilepath: 'https://img.icons8.com/ios/50/01567e/image.png',\n      files: [{\n        selectedFile: null,\n        selectedfilepath: 'https://img.icons8.com/ios/50/01567e/image.png'\n      }],\n      validation: {\n        name: '',\n        type: '',\n        content1: ''\n      }\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.type) {\n      this.setState(_objectSpread({}, this.props.type));\n    }\n\n    $(document).ready(function () {\n      $('.form').find('.inputf1').on('keyup blur focus', function (e) {\n        var $this = $(this),\n            label = $this.prev('.labelf1');\n\n        if (e.type === 'keyup') {\n          if ($this.val() === '') {\n            label.removeClass('active highlight');\n          } else {\n            label.addClass('active highlight');\n          }\n        } else if (e.type === 'blur') {\n          if ($this.val() === '') {\n            label.removeClass('active highlight');\n          } else {\n            label.removeClass('highlight');\n          }\n        } else if (e.type === 'focus') {\n          if ($this.val() === '') {\n            label.removeClass('highlight');\n          } else if ($this.val() !== '') {\n            label.addClass('highlight');\n          }\n        }\n      });\n\n      function loadingform1() {\n        $('.form .inputf1').each(function () {\n          var val = $(this).val().trim();\n\n          if (val != '') {\n            $(this).prev('.labelf1').addClass('active highlight');\n          }\n        });\n      }\n\n      loadingform1();\n    });\n  }\n\n  showsidebar() {\n    this.refs.child.showSidebar();\n  }\n\n  render() {\n    //side navbar link\n    const sidenavlink = [{\n      id: 1,\n      link: '/',\n      linkname: 'home'\n    }];\n    const sidenavconst = {\n      topic: 'Categeries',\n      topiclink: 'All Categeriess',\n      sidenavlink: sidenavlink,\n      visible: false\n    }; //////////////\n\n    return __jsx(Layout, null, __jsx(Head, null, __jsx(\"title\", {\n      className: \"jsx-2073207849\"\n    }, \" \", web.wetopic)), __jsx(SubNavBar, {\n      sidenavconst: sidenavconst\n    }), __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + \"form-create-shop\"\n    }, __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + \"container\"\n    }, __jsx(\"h1\", {\n      className: \"jsx-2073207849\" + \" \" + \"font4 fontsizeE2-25 topicColor d-flex justify-content-center\"\n    }, \"Create new Categery\"), __jsx(\"form\", {\n      className: \"jsx-2073207849\" + \" \" + \"form\"\n    }, __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + \"content\"\n    }, __jsx(\"h3\", {\n      className: \"jsx-2073207849\" + \" \" + \"font4 fontsizeE1-5 fontcolorOrange\"\n    }, \"new type\"), __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + \"row\"\n    }, __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + \"field-wrap col-lg-4 col-md-4 col-sm-12\"\n    }, __jsx(\"label\", {\n      className: \"jsx-2073207849\" + \" \" + \"font2 labelf1\"\n    }, \"name\", __jsx(\"span\", {\n      className: \"jsx-2073207849\" + \" \" + \"req\"\n    }, \"*\")), __jsx(\"input\", {\n      type: \"text\",\n      required: true,\n      name: \"name\",\n      value: this.state.name,\n      onChange: this.handleChange,\n      onBlur: this.validationform,\n      className: \"jsx-2073207849\" + \" \" + ('font6 inputf1 ' + (this.state.validation.name != '' ? 'input-error' : '') || \"\")\n    }), __jsx(\"span\", {\n      className: \"jsx-2073207849\" + \" \" + \"form-error\"\n    }, this.state.validation.name)), __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + \"field-wrap col-lg-4 col-md-4 col-sm-12\"\n    }, __jsx(\"label\", {\n      className: \"jsx-2073207849\" + \" \" + \"font2 labelf1\"\n    }, \"type\", __jsx(\"span\", {\n      className: \"jsx-2073207849\" + \" \" + \"req\"\n    }, \"*\")), __jsx(\"input\", {\n      type: \"text\",\n      required: true,\n      name: \"type\",\n      value: this.state.type,\n      onChange: this.handleChange,\n      onBlur: this.validationform,\n      className: \"jsx-2073207849\" + \" \" + ('font6 inputf1 ' + (this.state.validation.type != '' ? 'input-error' : '') || \"\")\n    }), __jsx(\"span\", {\n      className: \"jsx-2073207849\" + \" \" + \"form-error\"\n    }, this.state.validation.type)), __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + \"field-wrap col-lg-12 col-sm-12\"\n    }, __jsx(\"label\", {\n      className: \"jsx-2073207849\" + \" \" + \"font2 labelf1\"\n    }, \"details\", __jsx(\"span\", {\n      className: \"jsx-2073207849\" + \" \" + \"req\"\n    }, \"*\")), __jsx(\"textarea\", {\n      rows: \"3\",\n      required: true,\n      name: \"content1\",\n      value: this.state.content1,\n      onChange: this.handleChange,\n      onBlur: this.validationform,\n      className: \"jsx-2073207849\" + \" \" + ('font6 inputf1 ' + (this.state.validation.content1 != '' ? 'input-error' : '') || \"\")\n    }), __jsx(\"span\", {\n      className: \"jsx-2073207849\" + \" \" + \"form-error\"\n    }, this.state.validation.content1))), __jsx(\"hr\", {\n      className: \"jsx-2073207849\"\n    }), __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + \"content\"\n    }, __jsx(\"h3\", {\n      className: \"jsx-2073207849\" + \" \" + \"font4 fontsizeE1-5 fontcolorOrange\"\n    }, \"Sub type\"), __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + \"col-12\"\n    }, __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + \" field-wrap col-lg-6 col-md-6 col-sm-12\"\n    }, __jsx(\"div\", {\n      role: \"group\",\n      \"aria-label\": \"Basic example\",\n      className: \"jsx-2073207849\" + \" \" + \"btn-group\"\n    }, __jsx(\"input\", {\n      type: \"text\",\n      required: true,\n      name: \"newsubtype\",\n      value: this.state.newsubtype,\n      onChange: this.handleChange,\n      onBlur: this.validationform,\n      className: \"jsx-2073207849\" + \" \" + 'font6 inputf1 '\n    }), __jsx(\"button\", {\n      type: \"button\",\n      required: true,\n      name: \"newsubtype\",\n      onClick: this.addnewSubtypes,\n      className: \"jsx-2073207849\" + \" \" + \"font6  btn btn-addnewshop\"\n    }, \" new+ \"))), __jsx(\"span\", {\n      className: \"jsx-2073207849\"\n    }, \"If you need add more field as your details of subtype\")), __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + \"row\"\n    }, this.state.subtype.map((x, i) => __jsx(\"div\", {\n      key: i,\n      className: \"jsx-2073207849\" + \" \" + \"field-wrap col-lg-4 col-md-4 col-sm-12\"\n    }, __jsx(\"div\", {\n      onClick: () => this.deleteDetals(x.name),\n      display: \"none\",\n      className: \"jsx-2073207849\" + \" \" + \"popup-close-1\"\n    }, \"x\"), __jsx(\"label\", {\n      className: \"jsx-2073207849\" + \" \" + \"font2 labelf1\"\n    }, x.name), __jsx(\"input\", {\n      type: \"text\",\n      required: true,\n      name: x.name,\n      value: x.type,\n      onChange: this.handleChangedetails,\n      className: \"jsx-2073207849\" + \" \" + 'font6 inputf1'\n    }))))), __jsx(\"hr\", {\n      className: \"jsx-2073207849\"\n    }), __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + \"content\"\n    }, __jsx(\"h3\", {\n      className: \"jsx-2073207849\" + \" \" + \"font4 fontsizeE1-5 fontcolorOrange\"\n    }, \"cover images for shop\"), __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + \" row col-12\"\n    }, __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + \" field-wrap col-lg-4 col-md-4 col-sm-12\"\n    }, __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + \"imageupload d-flex justify-content-center\"\n    }, __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + \"popup-close-2\"\n    }, \"x\"), __jsx(\"img\", {\n      width: this.state.mainfilepath != this.state.defaultfilepath ? '100%' : null,\n      src: this.state.mainfilepath,\n      className: \"jsx-2073207849\" + \" \" + \"align-self-center\"\n    }), __jsx(\"input\", {\n      type: \"file\",\n      required: true,\n      onChange: this.mainfileChangeHandler,\n      className: \"jsx-2073207849\" + \" \" + \"imageupload-input\"\n    }))))), __jsx(\"hr\", {\n      className: \"jsx-2073207849\"\n    }), __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + \"content\"\n    }, __jsx(\"h3\", {\n      className: \"jsx-2073207849\" + \" \" + \"font4 fontsizeE1-5 fontcolorOrange\"\n    }, \"cover images for shop\"), __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + \" row col-12\"\n    }, this.state.files.map((x, i) => __jsx(\"div\", {\n      key: i,\n      className: \"jsx-2073207849\" + \" \" + \" field-wrap col-lg-4 col-md-4 col-sm-12\"\n    }, __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + \"imageupload d-flex justify-content-center\"\n    }, __jsx(\"div\", {\n      onClick: () => this.deleteFiles(x.selectedfilepath),\n      className: \"jsx-2073207849\" + \" \" + \"popup-close-2\"\n    }, \"x\"), __jsx(\"img\", {\n      width: x.selectedfilepath != this.state.defaultfilepath ? '100%' : null,\n      src: x.selectedfilepath,\n      className: \"jsx-2073207849\" + \" \" + \"align-self-center\"\n    }), __jsx(\"input\", {\n      type: \"file\",\n      required: true,\n      value: x.file,\n      onChange: this.fileChangeHandler,\n      className: \"jsx-2073207849\" + \" \" + \"imageupload-input\"\n    }))))))), __jsx(\"hr\", {\n      className: \"jsx-2073207849\"\n    }), __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + \"content\"\n    }, __jsx(\"h3\", {\n      className: \"jsx-2073207849\" + \" \" + \"font4 fontsizeE1-5 fontcolorOrange\"\n    }, \"what should be removed\"), __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + \" row col-12\"\n    }, this.state.images.map((x, i) => __jsx(\"div\", {\n      key: i,\n      className: \"jsx-2073207849\" + \" \" + 'field-wrap col-lg-4 col-md-4 col-sm-12'\n    }, __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + ((this.state.deleteimages.includes(x) ? 'imageupload d-flex justify-content-center remove-image' : 'imageupload d-flex justify-content-center') || \"\")\n    }, !this.state.deleteimages.includes(x) ? __jsx(\"div\", {\n      onClick: () => this.deleteImagesinDB(x),\n      className: \"jsx-2073207849\" + \" \" + \"popup-close-3\"\n    }, \" remove\") : __jsx(\"div\", {\n      onClick: () => this.addImagesinDB(x),\n      className: \"jsx-2073207849\" + \" \" + \"popup-close-3\"\n    }, \" add\"), __jsx(\"img\", {\n      width: x != this.state.defaultfilepath ? '100%' : null,\n      src: ImageUrl + x,\n      className: \"jsx-2073207849\" + \" \" + \"align-self-center\"\n    })))))), __jsx(\"div\", {\n      className: \"jsx-2073207849\" + \" \" + \"d-flex justify-content-end\"\n    }, __jsx(\"button\", {\n      type: \"button\",\n      required: true,\n      name: \"newsubtype\",\n      onClick: this.handleSubmit,\n      className: \"jsx-2073207849\" + \" \" + \"font6  btn btn-submit \"\n    }, \" Submit \"))))), __jsx(_JSXStyle, {\n      id: \"2073207849\"\n    }, \".imageupload.jsx-2073207849{background:#c2d1e17d;height:200px;border:1.5px solid #01567e;overflow:hidden;margin-top:2rem;}.imageupload-input.jsx-2073207849{position:absolute;font-size:1px;cursor:pointer;opacity:0;height:100%;width:80%;}.popup-close-1.jsx-2073207849{color:white;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;background:#01567e;cursor:pointer;font-size:0.6rem;width:1.2rem;height:1.2rem;top:2.2rem;right:1rem;position:absolute;border-radious:100%;}.popup-close-2.jsx-2073207849{color:white;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;background:#01567e;cursor:pointer;font-size:0.6rem;width:1.5rem;height:1.5rem;top:2.1rem;right:1rem;position:absolute;}.form-create-shop.jsx-2073207849{background:#8b8b8ba8;}.container.jsx-2073207849{background-image:url(\\\"/form1.jpg\\\");background-repeat:no-repeat;padding :20px 10px;opacity:1.1;}.labelf1.jsx-2073207849{position:relative;-webkit-transform:translateY(40px);-ms-transform:translateY(40px);transform:translateY(40px);left:1em;color:#01567e;-webkit-transition:all 0.25s ease;transition:all 0.25s ease;-webkit-backface-visibility:hidden;pointer-events:none;font-size:1.1em;}.labelf1.jsx-2073207849 .req.jsx-2073207849{margin:2px;color:#01567e;}.labelf1.active.jsx-2073207849{left:1em;-webkit-transform:translateY(0.5em);-ms-transform:translateY(0.5em);transform:translateY(0.5em);font-size:1em;}.labelf1.active.jsx-2073207849 .req.jsx-2073207849{opacity:0;}.labelf1.highlight.jsx-2073207849{color:#023957;}.inputf1.jsx-2073207849{font-size:1.1em;display:block;width:100%;padding:0.5em 0.7em;background:#c2d1e17d;background-image:none;border:none;border:1.5px solid #01567e;color:darkblue;border-radius:0;-webkit-transition:border-color 0.5s ease;transition:border-color 0.5s ease;}.inputf1.jsx-2073207849:focus,textarea.jsx-2073207849:focus{outline:0;border-color:#023957;}textarea.jsx-2073207849{resize:vertical;}.field-wrap.jsx-2073207849{position:relative;}.btn-addnewshop.jsx-2073207849{background:#01567e;color:white;}.btn-submit.jsx-2073207849{background:#01567e;color:white;width:100%;margin-top:3rem;}.form-error.jsx-2073207849{color :red;font-size :0.8rem;}.input-error.jsx-2073207849{border-color:red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFxXZWItcHJvamVjdFxcbXlhcHBcXHBhZ2VzXFx1cGRhdGUtY2F0ZWdvcnlcXFtpZF0uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBNmNDLEFBRzBCLEFBT0gsQUFRVCxBQWVBLEFBZVksQUFLYyxBQU9qQixBQVVQLEFBSUYsQUFLQyxBQUdJLEFBR0UsQUFhTixBQUlNLEFBR0UsQUFJQyxBQUlBLEFBTVIsQUFJTSxTQWhEVyxDQUtoQyxBQW1CeUIsQ0E1QlAsQUFpREksQ0FyR1IsQUFlQSxFQWlEZCxFQUdrQixBQWlCbEIsQ0FxQkEsQ0FqSGtCLEFBa0RhLEFBOEMvQixDQUdlLEFBSUEsRUE5R0MsQUE2Q2hCLElBdUJBLElBaURBLENBbENlLENBYWYsQUFXQSxBQUljLENBdkdLLEVBUFksQ0FpREMsTUFrQ1IsQ0E0QkosS0F2R04sVUFDQyxDQXVHZixHQS9Hb0IsQUFtRkssRUFsQ0YsTUF4Q1YsUUFSTSxFQVNuQixHQXdDZSxBQWtDVyxJQXRFTixBQWVBLE9BM0JwQixDQWtEQSxVQWlDZ0IsQ0FmRSxNQWRMLEtBOEJrQixHQWYvQixDQWRrQixjQUNZLFNBNkJYLGVBQ0MsZ0JBQ2tCLEtBMUVkLEFBZUEsZUE2QmUsbUNBQ2Ysb0JBQ0osQ0E2QnBCLGVBNUJBLGFBOUNvQixBQWVBLG1CQWRKLEFBZUEsZUFkRSxBQWVBLGlCQWRKLEFBZUEsYUFkQyxBQWVBLGNBZEgsQUFlQSxXQWRBLEFBZUEsV0FkTyxBQWVBLGtCQWRJLEFBZ0J2QixvQkFmQSIsImZpbGUiOiJEOlxcV2ViLXByb2plY3RcXG15YXBwXFxwYWdlc1xcdXBkYXRlLWNhdGVnb3J5XFxbaWRdLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IEhlYWQgZnJvbSAnbmV4dC9oZWFkJztcclxuaW1wb3J0IExheW91dCBmcm9tICcuLy4uLy4uL2xheW91dHMvTWFpbkxheW91dCc7XHJcbmltcG9ydCBTdWJOYXZCYXIgZnJvbSAnLi8uLi8uLi9sYXlvdXRzL1N1Yk5hdmJhcic7XHJcbmltcG9ydCBGb290ZXIgZnJvbSAnLi8uLi8uLi9jb21wb25lbnRzL0Zvb3Rlcic7XHJcbmltcG9ydCBmZXRjaCBmcm9tICdpc29tb3JwaGljLXVuZmV0Y2gnO1xyXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknO1xyXG5pbXBvcnQgQ29va2llIGZyb20gXCJqcy1jb29raWVcIjtcclxuaW1wb3J0IHtVcmwsd2ViLFdlYlVybH0gZnJvbSAnLi8uLi8uLi9jb25zdGFudC9tYWluJztcclxuY2xhc3MgSW5kZXggZXh0ZW5kcyBDb21wb25lbnQge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgbmFtZTonJyxcclxuICAgICAgICAgICAgdHlwZTonJyxcclxuICAgICAgICAgICAgY29udGVudDE6JycsXHJcbiAgICAgICAgICAgIG5ld3N1YnR5cGU6JycsXHJcbiAgICAgICAgICAgIG1haW5maWxlOm51bGwsXHJcbiAgICAgICAgICAgIGltYWdlczpbXSxcclxuICAgICAgICAgICAgZGVsZXRlaW1hZ2VzOltdLFxyXG4gICAgICAgICAgICBtYWluZmlsZXBhdGg6J2h0dHBzOi8vaW1nLmljb25zOC5jb20vaW9zLzUwLzAxNTY3ZS9pbWFnZS5wbmcnLFxyXG4gICAgICAgICAgICBzdWJ0eXBlOltdLFxyXG4gICAgICAgICAgICBzZWxlY3RlZEZpbGVjb3VudCA6IDEsXHJcbiAgICAgICAgICAgIGRlZmF1bHRmaWxlcGF0aCA6J2h0dHBzOi8vaW1nLmljb25zOC5jb20vaW9zLzUwLzAxNTY3ZS9pbWFnZS5wbmcnLFxyXG4gICAgICAgICAgICBmaWxlcyA6IFt7c2VsZWN0ZWRGaWxlOm51bGwsc2VsZWN0ZWRmaWxlcGF0aDonaHR0cHM6Ly9pbWcuaWNvbnM4LmNvbS9pb3MvNTAvMDE1NjdlL2ltYWdlLnBuZyd9XSxcclxuICAgICAgICAgICAgdmFsaWRhdGlvbiA6IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICcnLFxyXG4gICAgICAgICAgICAgICAgdHlwZSA6JycsXHJcbiAgICAgICAgICAgICAgICBjb250ZW50MTonJyxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBjb21wb25lbnREaWRNb3VudCgpe1xyXG4gICAgICAgIGlmKHRoaXMucHJvcHMudHlwZSl7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgLi4udGhpcy5wcm9wcy50eXBlXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgXHJcblxyXG4gICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkKCcuZm9ybScpLmZpbmQoJy5pbnB1dGYxJykub24oJ2tleXVwIGJsdXIgZm9jdXMnLCBmdW5jdGlvbiAoZSkge1xyXG4gIFxyXG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbCA9ICR0aGlzLnByZXYoJy5sYWJlbGYxJyk7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gJ2tleXVwJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkdGhpcy52YWwoKSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwucmVtb3ZlQ2xhc3MoJ2FjdGl2ZSBoaWdobGlnaHQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsLmFkZENsYXNzKCdhY3RpdmUgaGlnaGxpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS50eXBlID09PSAnYmx1cicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmKCAkdGhpcy52YWwoKSA9PT0gJycgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwucmVtb3ZlQ2xhc3MoJ2FjdGl2ZSBoaWdobGlnaHQnKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbC5yZW1vdmVDbGFzcygnaGlnaGxpZ2h0Jyk7ICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSAgIFxyXG4gICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gJ2ZvY3VzJykge1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCAkdGhpcy52YWwoKSA9PT0gJycgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwucmVtb3ZlQ2xhc3MoJ2hpZ2hsaWdodCcpOyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoICR0aGlzLnZhbCgpICE9PSAnJyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbC5hZGRDbGFzcygnaGlnaGxpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgZnVuY3Rpb24gbG9hZGluZ2Zvcm0xKCl7XHJcbiAgICAgICAgICAgICAgICAkKCcuZm9ybSAuaW5wdXRmMScpLmVhY2goXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9ICQodGhpcykudmFsKCkudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsICE9ICcnKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucHJldignLmxhYmVsZjEnKS5hZGRDbGFzcygnYWN0aXZlIGhpZ2hsaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICBcclxuICAgICAgICAgICAgbG9hZGluZ2Zvcm0xKCk7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcblxyXG4gICAgaGFuZGxlQ2hhbmdlID0gZXZ0ID0+IHtcclxuICAgIC8vIFRoaXMgdHJpZ2dlcnMgZXZlcnl0aW1lIHRoZSBpbnB1dCBpcyBjaGFuZ2VkXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIFtldnQudGFyZ2V0Lm5hbWVdOiBldnQudGFyZ2V0LnZhbHVlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuIFxyXG4gICAgaGFuZGxlQ2hhbmdlZGV0YWlscz0gZXZ0ID0+e1xyXG4gICAgICAgIHZhciBzaG9wZCA9IHRoaXMuc3RhdGUuc3VidHlwZTtcclxuICAgICAgICBzaG9wZC5maW5kKGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgICAgaWYoZS5uYW1lID09IGV2dC50YXJnZXQubmFtZSl7XHJcbiAgICAgICAgICAgICAgICAgZS50eXBlID0gZXZ0LnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHN1YnR5cGUgOiBzaG9wZFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBhZGRuZXdTdWJ0eXBlcyA9IGV2dCA9PntcclxuICAgICAgICBpZih0aGlzLnN0YXRlLm5ld3N1YnR5cGUgIT0gJycpe1xyXG4gICAgICAgICAgICB2YXIgc2hvcGQgPSB0aGlzLnN0YXRlLnN1YnR5cGU7XHJcbiAgICAgICAgICAgIHNob3BkLnB1c2goe25hbWU6dGhpcy5zdGF0ZS5uZXdzdWJ0eXBlLHR5cGU6Jyd9KTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBzdWJ0eXBlIDogc2hvcGQsXHJcbiAgICAgICAgICAgICAgICBuZXdzdWJ0eXBlIDogJydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnREaWRNb3VudCgpO1xyXG4gICAgICAgIH1cclxuICAgICBcclxuICAgIH1cclxuICAgIGRlbGV0ZURldGFscyA9IHR5cGUgPT57XHJcblxyXG4gICAgICAgIGlmKGNvbmZpcm0oJ2lzIGl0IHN1cmUgcmVtb3ZlICcrdHlwZSsnPycpKXtcclxuXHJcbiAgICAgICAgXHJcbiAgICAgICB2YXIgc2hvcGQgPSB0aGlzLnN0YXRlLnN1YnR5cGU7XHJcbiAgICAgICBzaG9wZC5zcGxpY2Uoc2hvcGQuZmluZEluZGV4KGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIHJldHVybiBlLm5hbWUgPT0gdHlwZVxyXG4gICAgIFxyXG4gICAgICAgIH0pLDEpO1xyXG5cclxuICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIHN1YnR5cGUgOiBzaG9wZCxcclxuICAgIH0pXHJcbiAgICB0aGlzLmNvbXBvbmVudERpZE1vdW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHZhbGlkYXRpb25mb3JtPShldnQpPT57XHJcbiAgICAgICAgdGhpcy5jaGVja3ZhbGlkYXRpb24oZXZ0LnRhcmdldC5uYW1lKVxyXG5cclxuICAgIH1cclxuICAgIGNoZWNrdmFsaWRhdGlvbiA9IChuYW1lKT0+e1xyXG4gICAgICAgIHZhciBmb3JtID0gdGhpcy5zdGF0ZTtcclxuICAgICAgICB2YXIgdmFsaWRhdGlvbiA9IHRoaXMuc3RhdGUudmFsaWRhdGlvbjtcclxuICAgICAgICBzd2l0Y2gobmFtZSl7XHJcbiAgICAgICAgICAgIGNhc2UgKCduYW1lJykgOiB2YWxpZGF0aW9uLm5hbWUgPSBcclxuICAgICAgICAgICAgZm9ybS5uYW1lLmxlbmd0aCA8MSA/ICAnbmFtZSBjYW5ub3QgYmUgZW1wdHkuJzonJ1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAoJ3R5cGUnKSA6IHZhbGlkYXRpb24udHlwZSA9IFxyXG4gICAgICAgICAgICBmb3JtLnR5cGUubGVuZ3RoIDwxID8gICd0eXBlIGNhbm5vdCBiZSBlbXB0eS4nOicnXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICgnY29udGVudDEnKSA6IHZhbGlkYXRpb24uY29udGVudDEgPSBcclxuICAgICAgICAgICAgZm9ybS5jb250ZW50MS5sZW5ndGggPDEgPyAgJ0NvbnRlbnQgY2Fubm90IGJlIGVtcHR5Lic6JydcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgdmFsaWRhdGlvbjp2YWxpZGF0aW9uXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIGJlZm9yZXN1Ym1pdD0oKT0+e1xyXG4gICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgT2JqZWN0LmVudHJpZXModGhpcy5zdGF0ZS52YWxpZGF0aW9uKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2t2YWxpZGF0aW9uKGtleSk7XHJcbiAgICAgICAgIH0pO1xyXG4gICAgICAgICBPYmplY3QuZW50cmllcyh0aGlzLnN0YXRlLnZhbGlkYXRpb24pLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xyXG4gICAgICAgICAgICAgaWYodmFsdWUhPScnKXtcclxuICAgICAgICAgICAgICAgICBjb3VudCA9IGNvdW50KzE7XHJcbiAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHJldHVybiBjb3VudDtcclxuICAgIH1cclxuICAgIGhhbmRsZVN1Ym1pdCA9IGV2dCA9PiB7XHJcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAvL2NoZWNrIHZhbGlkYXRpb25zXHJcbiAgICAgICAgaWYodGhpcy5iZWZvcmVzdWJtaXQoKT4wKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYWxlcnQoJ1NvcnJ5LCBjYW5ub3QgU3VibWl0IGZvcm0sIGNoZWNrIGFnYWluIGZvcm0hLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghQ29va2llLmdldEpTT04oJ3VzZXInKSl7XHJcbiAgICAgICAgICAgIGFsZXJ0KCdTb3JyeSwgeW91IGFyZSBub3Qgc2lnbiBpbi4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgICAgICAgICBpZih0aGlzLnN0YXRlLmZpbGVzIT11bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5maWxlcy5tYXAoKHgsaSk9PntcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLmFwcGVuZChgaW1hZ2VgLHguc2VsZWN0ZWRGaWxlKTsgICBcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIHZhciBqc29uYm9keSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgICAgICAgLy8ganNvbmJvZHkuZmlsZXMgPSBudWxsO1xyXG4gICAgICAgICAgIC8vIGpzb25ib2R5LmRlZmF1bHRmaWxlcGF0aCA9IG51bGw7XHJcbiAgICAgICAgICAgIGRhdGEuYXBwZW5kKCdqc29uYm9keScsIEpTT04uc3RyaW5naWZ5KGpzb25ib2R5KSk7XHJcbiAgICAgICAgICAgIGRhdGEuYXBwZW5kKCdtYWluZmlsZScsdGhpcy5zdGF0ZS5tYWluZmlsZSk7XHJcbiAgICAgICAgICAgZGF0YS5hcHBlbmQoJ3VzZXInLCBKU09OLnN0cmluZ2lmeShDb29raWUuZ2V0SlNPTigndXNlcicpKSk7XHJcbiAgICBcclxuICAgICAgICAgICAgZmV0Y2goJy9hcGkvdXBkYXRlQ2F0YWdlcnkvJyt0aGlzLnByb3BzLnR5cGVpZCx7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJvZHk6ZGF0YVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7IHJldHVybiByZXNwb25zZS5qc29uKCk7IH0gKVxyXG4gICAgICAgICAgICAudGhlbihkYXRhID0+IHsgaWYoZGF0YSE9dW5kZWZpbmVkKXthbGVydChkYXRhLm1zZyk7fX0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmxvZyhlcnJvcikpXHJcbiAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgXHJcbiAgICB9O1xyXG5cclxuICAgIG1haW5maWxlQ2hhbmdlSGFuZGxlcj1ldmVudD0+e1xyXG4gICAgICAgIGlmKGV2ZW50LnRhcmdldC5maWxlc1swXSl7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgbWFpbmZpbGUgOiBldmVudC50YXJnZXQuZmlsZXNbMF0sXHJcbiAgICAgICAgICAgICAgICBtYWluZmlsZXBhdGggOiBVUkwuY3JlYXRlT2JqZWN0VVJMKGV2ZW50LnRhcmdldC5maWxlc1swXSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH1cclxuXHJcbiAgICBmaWxlQ2hhbmdlSGFuZGxlcj1ldmVudD0+e1xyXG5cclxuICAgICAgICBpZih0aGlzLnN0YXRlLnNlbGVjdGVkRmlsZWNvdW50PjIpe1xyXG5cclxuICAgICAgICAgICAgdmFyIGZpbGVzID0gdGhpcy5zdGF0ZS5maWxlcztcclxuICAgICAgICAgICAgZmlsZXMuc3BsaWNlKGZpbGVzLmZpbmRJbmRleChmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgIHJldHVybiBlLnNlbGVjdGVkZmlsZXBhdGggPT0gJ2h0dHBzOi8vaW1nLmljb25zOC5jb20vaW9zLzUwLzAxNTY3ZS9pbWFnZS5wbmcnXHJcbiAgICAgICAgICBcclxuICAgICAgICAgICAgIH0pLDEpO1xyXG4gICAgIFxyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgIGZpbGVzIDogZmlsZXMsXHJcbiAgICAgICAgICAgICBzZWxlY3RlZEZpbGVjb3VudCA6IHRoaXMuc3RhdGUuc2VsZWN0ZWRGaWxlY291bnQtMVxyXG4gICAgICAgICB9KVxyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYoZXZlbnQudGFyZ2V0LmZpbGVzWzBdIT1udWxsKXtcclxuICAgICAgICAgICAgdmFyIGZpbGVzID0gdGhpcy5zdGF0ZS5maWxlcztcclxuICAgICAgICAgICAgZmlsZXMudW5zaGlmdCh7c2VsZWN0ZWRGaWxlOmV2ZW50LnRhcmdldC5maWxlc1swXSxzZWxlY3RlZGZpbGVwYXRoOlVSTC5jcmVhdGVPYmplY3RVUkwoZXZlbnQudGFyZ2V0LmZpbGVzWzBdKX0pO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgIGZpbGVzIDogZmlsZXMsXHJcbiAgICAgICAgICAgICAgc2VsZWN0ZWRGaWxlY291bnQgOiAodGhpcy5zdGF0ZS5zZWxlY3RlZEZpbGVjb3VudDwzKT90aGlzLnN0YXRlLnNlbGVjdGVkRmlsZWNvdW50KzE6M1xyXG4gICAgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgIFxyXG4gICAgfVxyXG4gICAgZGVsZXRlRmlsZXMgPSBzZWxlY3RlZGZpbGVwYXRoID0+e1xyXG5cclxuICAgICAgICBpZihjb25maXJtKCdpcyBpdCBzdXJlIHJlbW92ZSA/Jykpe1xyXG5cclxuICAgICAgICAgICAgaWYodGhpcy5zdGF0ZS5zZWxlY3RlZEZpbGVjb3VudD09MSl7XHJcbiAgICAgICBcclxuICAgICAgICAgICAgICAgIHZhciBmaWxlcyA9IFt7c2VsZWN0ZWRGaWxlOm51bGwsc2VsZWN0ZWRmaWxlcGF0aDp0aGlzLnN0YXRlLmRlZmF1bHRmaWxlcGF0aH1dO1xyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgIGZpbGVzIDogZmlsZXMsXHJcbiAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRmlsZWNvdW50IDogMVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpbGVzID0gdGhpcy5zdGF0ZS5maWxlcztcclxuICAgICAgICAgICAgICAgIGZpbGVzLnNwbGljZShmaWxlcy5maW5kSW5kZXgoZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgICAgICAgcmV0dXJuIGUuc2VsZWN0ZWRmaWxlcGF0aCA9PSBzZWxlY3RlZGZpbGVwYXRoXHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgfSksMSk7XHJcbiAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICBmaWxlcyA6IGZpbGVzLFxyXG4gICAgICAgICAgICAgICAgIHNlbGVjdGVkRmlsZWNvdW50IDogdGhpcy5zdGF0ZS5zZWxlY3RlZEZpbGVjb3VudC0xXHJcbiAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgfVxyXG4gICAgIFxyXG5cclxuICAgIH1cclxuICAgIFxyXG4gICAgZGVsZXRlSW1hZ2VzaW5EQiA9IHggPT57XHJcblxyXG4gICAgICAgIHZhciBkZWxldGVpbWFnZXMgPSB0aGlzLnN0YXRlLmRlbGV0ZWltYWdlcztcclxuICAgICAgICBpZighZGVsZXRlaW1hZ2VzLmluY2x1ZGVzKHgpKVxyXG4gICAgICAgIHsgZGVsZXRlaW1hZ2VzLnB1c2goeCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlaW1hZ2VzOmRlbGV0ZWltYWdlc1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgXHJcbiAgICB9XHJcbiAgICBhZGRJbWFnZXNpbkRCID0geCA9PntcclxuICAgICAgICBcclxuICAgICAgICB2YXIgZGVsZXRlaW1hZ2VzID0gdGhpcy5zdGF0ZS5kZWxldGVpbWFnZXM7XHJcbiAgICAgICAgaWYoZGVsZXRlaW1hZ2VzLmluY2x1ZGVzKHgpKVxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICAgIGRlbGV0ZWltYWdlcy5zcGxpY2UoZGVsZXRlaW1hZ2VzLmZpbmRJbmRleChlPT5lPT14KSwxKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkZWxldGVpbWFnZXM6ZGVsZXRlaW1hZ2VzXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuICAgICAgXHJcblxyXG4gICAgc2hvd3NpZGViYXIoKXtcclxuICAgICAgICB0aGlzLnJlZnMuY2hpbGQuc2hvd1NpZGViYXIoKTtcclxuICAgICAgfVxyXG4gICAgXHJcbiAgICByZW5kZXIoKSB7IFxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICAvL3NpZGUgbmF2YmFyIGxpbmtcclxuICAgICAgICBjb25zdCBzaWRlbmF2bGluayA9IFtcclxuICAgICAgICAgICAge2lkOjEsbGluazonLycsbGlua25hbWU6J2hvbWUnfSxcclxuICAgICAgICAgIF07XHJcbiAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3Qgc2lkZW5hdmNvbnN0ID0ge3RvcGljIDogJ0NhdGVnZXJpZXMnLHRvcGljbGluazonQWxsIENhdGVnZXJpZXNzJyxzaWRlbmF2bGluazpzaWRlbmF2bGluayx2aXNpYmxlOmZhbHNlIH07XHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAgIHJldHVybiAoIFxyXG4gICAgICAgICAgICA8TGF5b3V0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPEhlYWQ+XHJcbiAgICAgICAgICAgICAgICA8dGl0bGU+IHt3ZWIud2V0b3BpY308L3RpdGxlPlxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICA8L0hlYWQ+XHJcbiAgICAgICAgICAgICAgICA8U3ViTmF2QmFyIHNpZGVuYXZjb25zdD17c2lkZW5hdmNvbnN0fS8+XHJcblxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvcm0tY3JlYXRlLXNob3BcIj5cclxuXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lclwiID5cclxuICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZm9udDQgZm9udHNpemVFMi0yNSB0b3BpY0NvbG9yIGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyXCI+Q3JlYXRlIG5ldyBDYXRlZ2VyeTwvaDE+XHJcbiAgICAgICAgICAgICAgICAgICAgPGZvcm0gY2xhc3NOYW1lPVwiZm9ybVwiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cImZvbnQ0IGZvbnRzaXplRTEtNSBmb250Y29sb3JPcmFuZ2VcIj5uZXcgdHlwZTwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpZWxkLXdyYXAgY29sLWxnLTQgY29sLW1kLTQgY29sLXNtLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsICBjbGFzc05hbWU9XCJmb250MiBsYWJlbGYxXCI+bmFtZTxzcGFuIGNsYXNzTmFtZT1cInJlcVwiPio8L3NwYW4+PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3NOYW1lPXsnZm9udDYgaW5wdXRmMSAnKyh0aGlzLnN0YXRlLnZhbGlkYXRpb24ubmFtZSE9Jyc/J2lucHV0LWVycm9yJzonJyl9IHR5cGU9XCJ0ZXh0XCIgcmVxdWlyZWQgIG5hbWU9XCJuYW1lXCIgdmFsdWU9e3RoaXMuc3RhdGUubmFtZX0gb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlfSBvbkJsdXI9e3RoaXMudmFsaWRhdGlvbmZvcm19Lz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb3JtLWVycm9yXCI+e3RoaXMuc3RhdGUudmFsaWRhdGlvbi5uYW1lfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaWVsZC13cmFwIGNvbC1sZy00IGNvbC1tZC00IGNvbC1zbS0xMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCAgY2xhc3NOYW1lPVwiZm9udDIgbGFiZWxmMVwiPnR5cGU8c3BhbiBjbGFzc05hbWU9XCJyZXFcIj4qPC9zcGFuPjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzTmFtZT17J2ZvbnQ2IGlucHV0ZjEgJysodGhpcy5zdGF0ZS52YWxpZGF0aW9uLnR5cGUhPScnPydpbnB1dC1lcnJvcic6JycpfSB0eXBlPVwidGV4dFwiIHJlcXVpcmVkICBuYW1lPVwidHlwZVwiIHZhbHVlPXt0aGlzLnN0YXRlLnR5cGV9IG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZX0gb25CbHVyPXt0aGlzLnZhbGlkYXRpb25mb3JtfS8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9ybS1lcnJvclwiPnt0aGlzLnN0YXRlLnZhbGlkYXRpb24udHlwZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmllbGQtd3JhcCBjb2wtbGctMTIgY29sLXNtLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsICBjbGFzc05hbWU9XCJmb250MiBsYWJlbGYxXCI+ZGV0YWlsczxzcGFuIGNsYXNzTmFtZT1cInJlcVwiPio8L3NwYW4+PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgY2xhc3NOYW1lPXsnZm9udDYgaW5wdXRmMSAnKyh0aGlzLnN0YXRlLnZhbGlkYXRpb24uY29udGVudDEhPScnPydpbnB1dC1lcnJvcic6JycpfSAgcm93cz1cIjNcIiByZXF1aXJlZCAgbmFtZT1cImNvbnRlbnQxXCIgdmFsdWU9e3RoaXMuc3RhdGUuY29udGVudDF9IG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZX0gb25CbHVyPXt0aGlzLnZhbGlkYXRpb25mb3JtfS8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9ybS1lcnJvclwiPnt0aGlzLnN0YXRlLnZhbGlkYXRpb24uY29udGVudDF9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBzdWIgaXRlbXMgZGV0YWlscyAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGhyPjwvaHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwiZm9udDQgZm9udHNpemVFMS01IGZvbnRjb2xvck9yYW5nZVwiPlN1YiB0eXBlPC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtMTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgZmllbGQtd3JhcCBjb2wtbGctNiBjb2wtbWQtNiBjb2wtc20tMTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ0bi1ncm91cFwiIHJvbGU9XCJncm91cFwiIGFyaWEtbGFiZWw9XCJCYXNpYyBleGFtcGxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3NOYW1lPSdmb250NiBpbnB1dGYxICcgIHJlcXVpcmVkICBuYW1lPVwibmV3c3VidHlwZVwiIHZhbHVlPXt0aGlzLnN0YXRlLm5ld3N1YnR5cGV9IG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZX0gb25CbHVyPXt0aGlzLnZhbGlkYXRpb25mb3JtfS8+ICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT1cImZvbnQ2ICBidG4gYnRuLWFkZG5ld3Nob3BcIiAgcmVxdWlyZWQgIG5hbWU9XCJuZXdzdWJ0eXBlXCIgb25DbGljaz17dGhpcy5hZGRuZXdTdWJ0eXBlc30gPiBuZXcrIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+SWYgeW91IG5lZWQgYWRkIG1vcmUgZmllbGQgYXMgeW91ciBkZXRhaWxzIG9mIHN1YnR5cGU8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5zdWJ0eXBlLm1hcCgoeCxpKT0+KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2l9IGNsYXNzTmFtZT1cImZpZWxkLXdyYXAgY29sLWxnLTQgY29sLW1kLTQgY29sLXNtLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBvcHVwLWNsb3NlLTFcIiBvbkNsaWNrPXsoKT0+dGhpcy5kZWxldGVEZXRhbHMoeC5uYW1lKX0gZGlzcGxheT0nbm9uZScgPng8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCAgY2xhc3NOYW1lPVwiZm9udDIgbGFiZWxmMVwiPnt4Lm5hbWV9PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzc05hbWU9J2ZvbnQ2IGlucHV0ZjEnIHR5cGU9XCJ0ZXh0XCIgcmVxdWlyZWQgIG5hbWU9e3gubmFtZX0gdmFsdWU9e3gudHlwZX0gb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlZGV0YWlsc30gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoci8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwiZm9udDQgZm9udHNpemVFMS01IGZvbnRjb2xvck9yYW5nZVwiPmNvdmVyIGltYWdlcyBmb3Igc2hvcDwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIHJvdyBjb2wtMTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiAgY2xhc3NOYW1lPVwiIGZpZWxkLXdyYXAgY29sLWxnLTQgY29sLW1kLTQgY29sLXNtLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbWFnZXVwbG9hZCBkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicG9wdXAtY2xvc2UtMlwiPng8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzTmFtZT1cImFsaWduLXNlbGYtY2VudGVyXCIgd2lkdGg9e3RoaXMuc3RhdGUubWFpbmZpbGVwYXRoIT10aGlzLnN0YXRlLmRlZmF1bHRmaWxlcGF0aD8nMTAwJSc6bnVsbH0gc3JjPXt0aGlzLnN0YXRlLm1haW5maWxlcGF0aH0vPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzc05hbWU9XCJpbWFnZXVwbG9hZC1pbnB1dFwiIHR5cGU9XCJmaWxlXCIgcmVxdWlyZWQgICBvbkNoYW5nZT17dGhpcy5tYWluZmlsZUNoYW5nZUhhbmRsZXJ9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PiAgXHJcbiAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogZmlsZSB1cGxvYWQgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoci8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJmb250NCBmb250c2l6ZUUxLTUgZm9udGNvbG9yT3JhbmdlXCI+Y292ZXIgaW1hZ2VzIGZvciBzaG9wPC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgcm93IGNvbC0xMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5maWxlcy5tYXAoKHgsaSk9PihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17aX0gY2xhc3NOYW1lPVwiIGZpZWxkLXdyYXAgY29sLWxnLTQgY29sLW1kLTQgY29sLXNtLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbWFnZXVwbG9hZCBkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicG9wdXAtY2xvc2UtMlwiIG9uQ2xpY2s9eygpPT50aGlzLmRlbGV0ZUZpbGVzKHguc2VsZWN0ZWRmaWxlcGF0aCl9Png8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzTmFtZT1cImFsaWduLXNlbGYtY2VudGVyXCIgd2lkdGg9e3guc2VsZWN0ZWRmaWxlcGF0aCE9dGhpcy5zdGF0ZS5kZWZhdWx0ZmlsZXBhdGg/JzEwMCUnOm51bGx9IHNyYz17eC5zZWxlY3RlZGZpbGVwYXRofS8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzTmFtZT1cImltYWdldXBsb2FkLWlucHV0XCIgdHlwZT1cImZpbGVcIiByZXF1aXJlZCAgdmFsdWU9e3guZmlsZX0gb25DaGFuZ2U9e3RoaXMuZmlsZUNoYW5nZUhhbmRsZXJ9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PiAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogZmlsZSByZW1vdmUgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoci8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJmb250NCBmb250c2l6ZUUxLTUgZm9udGNvbG9yT3JhbmdlXCI+d2hhdCBzaG91bGQgYmUgcmVtb3ZlZDwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIHJvdyBjb2wtMTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUuaW1hZ2VzLm1hcCgoeCxpKT0+KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtpfSBjbGFzc05hbWU9eydmaWVsZC13cmFwIGNvbC1sZy00IGNvbC1tZC00IGNvbC1zbS0xMid9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgIGNsYXNzTmFtZT17dGhpcy5zdGF0ZS5kZWxldGVpbWFnZXMuaW5jbHVkZXMoeCk/J2ltYWdldXBsb2FkIGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIHJlbW92ZS1pbWFnZSc6J2ltYWdldXBsb2FkIGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyJ30+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHshdGhpcy5zdGF0ZS5kZWxldGVpbWFnZXMuaW5jbHVkZXMoeCk/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwb3B1cC1jbG9zZS0zXCIgb25DbGljaz17KCk9PnRoaXMuZGVsZXRlSW1hZ2VzaW5EQih4KX0+IHJlbW92ZTwvZGl2PjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwb3B1cC1jbG9zZS0zXCIgb25DbGljaz17KCk9PnRoaXMuYWRkSW1hZ2VzaW5EQih4KX0+IGFkZDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBjbGFzc05hbWU9XCJhbGlnbi1zZWxmLWNlbnRlclwiIHdpZHRoPXt4IT10aGlzLnN0YXRlLmRlZmF1bHRmaWxlcGF0aD8nMTAwJSc6bnVsbH0gc3JjPXtJbWFnZVVybCt4fS8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+ICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgKSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtZW5kXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPVwiZm9udDYgIGJ0biBidG4tc3VibWl0IFwiICByZXF1aXJlZCAgbmFtZT1cIm5ld3N1YnR5cGVcIiBvbkNsaWNrPXt0aGlzLmhhbmRsZVN1Ym1pdH0gPiBTdWJtaXQgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuXHJcbjxzdHlsZSBqc3g+XHJcbntgXHJcbi5pbWFnZXVwbG9hZHtcclxuICAgIGJhY2tncm91bmQ6ICNjMmQxZTE3ZDtcclxuICAgIGhlaWdodDoyMDBweDtcclxuICAgIGJvcmRlcjogMS41cHggc29saWQgIzAxNTY3ZTtcclxuICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgICBtYXJnaW4tdG9wOjJyZW07XHJcbn1cclxuLmltYWdldXBsb2FkLWlucHV0e1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgZm9udC1zaXplOiAxcHg7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICBvcGFjaXR5OiAwO1xyXG4gICAgaGVpZ2h0OjEwMCU7XHJcbiAgICB3aWR0aDo4MCU7XHJcbn1cclxuLnBvcHVwLWNsb3NlLTEge1xyXG5cdGNvbG9yOiB3aGl0ZTtcclxuXHRkaXNwbGF5OiBmbGV4O1xyXG5cdGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcblx0anVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcblx0YmFja2dyb3VuZDogIzAxNTY3ZTtcclxuXHRjdXJzb3I6IHBvaW50ZXI7XHJcblx0Zm9udC1zaXplOiAwLjZyZW07XHJcblx0d2lkdGg6IDEuMnJlbTtcclxuXHRoZWlnaHQ6IDEuMnJlbTtcclxuXHR0b3A6IDIuMnJlbTtcclxuXHRyaWdodDogMXJlbTtcclxuXHRwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBib3JkZXItcmFkaW91czoxMDAlO1xyXG59XHJcbi5wb3B1cC1jbG9zZS0yIHtcclxuXHRjb2xvcjogd2hpdGU7XHJcblx0ZGlzcGxheTogZmxleDtcclxuXHRhbGlnbi1pdGVtczogY2VudGVyO1xyXG5cdGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG5cdGJhY2tncm91bmQ6ICMwMTU2N2U7XHJcblx0Y3Vyc29yOiBwb2ludGVyO1xyXG5cdGZvbnQtc2l6ZTogMC42cmVtO1xyXG5cdHdpZHRoOiAxLjVyZW07XHJcblx0aGVpZ2h0OiAxLjVyZW07XHJcblx0dG9wOiAyLjFyZW07XHJcblx0cmlnaHQ6IDFyZW07XHJcblx0cG9zaXRpb246IGFic29sdXRlO1xyXG5cclxufVxyXG4uZm9ybS1jcmVhdGUtc2hvcCB7XHJcbiAgICBiYWNrZ3JvdW5kOiAjOGI4YjhiYTg7XHJcbn1cclxuLmNvbnRhaW5lcntcclxuICAgIFxyXG4gICAgLypiYWNrZ3JvdW5kOiAjZGRlMWZmYmYgIDsqL1xyXG4gICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiL2Zvcm0xLmpwZ1wiKTtcclxuICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7IC8qIERvIG5vdCByZXBlYXQgdGhlIGltYWdlICovXHJcbiAgICBwYWRkaW5nIDogMjBweCAxMHB4O1xyXG4gICAgb3BhY2l0eToxLjE7XHJcbiAgIFxyXG59XHJcbi5sYWJlbGYxIHtcclxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSg0MHB4KTtcclxuICAgIGxlZnQ6IDFlbTtcclxuICAgIGNvbG9yOiAjMDE1NjdlO1xyXG4gICAgdHJhbnNpdGlvbjogYWxsIDAuMjVzIGVhc2U7XHJcbiAgICAtd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcclxuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xyXG4gICAgZm9udC1zaXplOiAxLjFlbTtcclxufVxyXG4ubGFiZWxmMSAucmVxIHtcclxuICAgIG1hcmdpbjogMnB4O1xyXG4gICAgY29sb3I6ICMwMTU2N2U7XHJcbn1cclxuLmxhYmVsZjEuYWN0aXZlIHtcclxuICAgIGxlZnQ6IDFlbTtcclxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwLjVlbSk7XHJcbiAgICBmb250LXNpemU6IDFlbTtcclxufVxyXG4ubGFiZWxmMS5hY3RpdmUgLnJlcSB7XHJcbiAgICBvcGFjaXR5OiAwO1xyXG59XHJcbi5sYWJlbGYxLmhpZ2hsaWdodCB7XHJcbiAgICBjb2xvcjogIzAyMzk1NztcclxufVxyXG4uaW5wdXRmMSB7XHJcbiAgICBmb250LXNpemU6IDEuMWVtO1xyXG4gICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIHBhZGRpbmc6IDAuNWVtIDAuN2VtO1xyXG4gICAgYmFja2dyb3VuZDogI2MyZDFlMTdkO1xyXG4gICAgYmFja2dyb3VuZC1pbWFnZTogbm9uZTtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIGJvcmRlcjogMS41cHggc29saWQgIzAxNTY3ZTtcclxuICAgIGNvbG9yOiBkYXJrYmx1ZTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDA7XHJcbiAgICB0cmFuc2l0aW9uOiBib3JkZXItY29sb3IgMC41cyBlYXNlO1xyXG59XHJcbi5pbnB1dGYxOmZvY3VzLCB0ZXh0YXJlYTpmb2N1cyB7XHJcbiAgICBvdXRsaW5lOiAwO1xyXG4gICAgYm9yZGVyLWNvbG9yOiAjMDIzOTU3O1xyXG59XHJcbnRleHRhcmVhIHtcclxuICAgIHJlc2l6ZTogdmVydGljYWw7XHJcbn1cclxuLmZpZWxkLXdyYXAge1xyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG5cclxufVxyXG4uYnRuLWFkZG5ld3Nob3B7XHJcbiAgICBiYWNrZ3JvdW5kOiAjMDE1NjdlO1xyXG4gICAgY29sb3I6d2hpdGU7IFxyXG59XHJcbi5idG4tc3VibWl0e1xyXG4gICAgYmFja2dyb3VuZDogIzAxNTY3ZTtcclxuICAgIGNvbG9yOndoaXRlOyBcclxuICAgIHdpZHRoOjEwMCU7XHJcbiAgICBtYXJnaW4tdG9wOiAzcmVtO1xyXG59XHJcbi5mb3JtLWVycm9ye1xyXG4gICAgY29sb3IgOiByZWQ7XHJcbiAgICBmb250LXNpemUgOiAwLjhyZW07XHJcbn1cclxuLmlucHV0LWVycm9ye1xyXG4gICAgYm9yZGVyLWNvbG9yOiByZWQ7XHJcbn1cclxuYH1cclxuPC9zdHlsZT5cclxuICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8Rm9vdGVyLz5cclxuICAgICAgICAgICAgICAgICAgIDwvTGF5b3V0PlxyXG4gICAgICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIFxyXG59XHJcblxyXG5cclxuSW5kZXguZ2V0SW5pdGlhbFByb3BzID0gYXN5bmMgZnVuY3Rpb24oY29udGV4dCkge1xyXG4gICAgY29uc3QgeyBpZCB9ID0gY29udGV4dC5xdWVyeTtcclxuICAgIFxyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7VXJsfXR5cGVieWlkLyR7aWR9YCk7XHJcbiAgICB2YXIgIHR5cGVzID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgIHZhciBlcnJvciA9IGZhbHNlO1xyXG4gICAgaWYocmVzLnN0YXR1cyE9MjAwKXtcclxuICAgICAgICBlcnJvciA9IHRydWUgO1xyXG4gICB9XHJcbiAgY29uc29sZS5sb2codHlwZXMpXHJcbiAgICByZXR1cm4ge3R5cGVpZDppZCx0eXBlOnR5cGVzWzBdLGVycm9yfVxyXG5cclxuXHJcbiAgfVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgSW5kZXg7IFxyXG4iXX0= */\\n/*@ sourceURL=D:\\\\\\\\Web-project\\\\\\\\myapp\\\\\\\\pages\\\\\\\\update-category\\\\\\\\[id].js */\"), __jsx(Footer, null));\n  }\n\n}\n\nIndex.getInitialProps = async function (context) {\n  const {\n    id\n  } = context.query;\n  const res = await fetch(`${Url}typebyid/${id}`);\n  var types = await res.json();\n  var error = false;\n\n  if (res.status != 200) {\n    error = true;\n  }\n\n  console.log(types);\n  return {\n    typeid: id,\n    type: types[0],\n    error\n  };\n};\n\nexport default Index;","map":{"version":3,"sources":["D:/Web-project/myapp/pages/update-category/[id].js"],"names":["React","Component","Head","Layout","SubNavBar","Footer","fetch","$","Cookie","Url","web","WebUrl","Index","constructor","evt","setState","target","name","value","shopd","state","subtype","find","e","type","newsubtype","push","componentDidMount","confirm","splice","findIndex","checkvalidation","form","validation","length","content1","count","Object","entries","forEach","key","preventDefault","beforesubmit","alert","getJSON","data","FormData","files","undefined","map","x","i","append","selectedFile","jsonbody","JSON","stringify","mainfile","props","typeid","method","headers","body","then","response","json","msg","catch","error","console","log","event","mainfilepath","URL","createObjectURL","selectedFilecount","selectedfilepath","unshift","defaultfilepath","deleteimages","includes","images","document","ready","on","$this","label","prev","val","removeClass","addClass","loadingform1","each","trim","showsidebar","refs","child","showSidebar","render","sidenavlink","id","link","linkname","sidenavconst","topic","topiclink","visible","wetopic","handleChange","validationform","addnewSubtypes","deleteDetals","handleChangedetails","mainfileChangeHandler","deleteFiles","file","fileChangeHandler","deleteImagesinDB","addImagesinDB","ImageUrl","handleSubmit","getInitialProps","context","query","res","types","status"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Head from 'next/head';\r\nimport Layout from './../../layouts/MainLayout';\r\nimport SubNavBar from './../../layouts/SubNavbar';\r\nimport Footer from './../../components/Footer';\r\nimport fetch from 'isomorphic-unfetch';\r\nimport $ from 'jquery';\r\nimport Cookie from \"js-cookie\";\r\nimport {Url,web,WebUrl} from './../../constant/main';\r\nclass Index extends Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            name:'',\r\n            type:'',\r\n            content1:'',\r\n            newsubtype:'',\r\n            mainfile:null,\r\n            images:[],\r\n            deleteimages:[],\r\n            mainfilepath:'https://img.icons8.com/ios/50/01567e/image.png',\r\n            subtype:[],\r\n            selectedFilecount : 1,\r\n            defaultfilepath :'https://img.icons8.com/ios/50/01567e/image.png',\r\n            files : [{selectedFile:null,selectedfilepath:'https://img.icons8.com/ios/50/01567e/image.png'}],\r\n            validation : {\r\n                name: '',\r\n                type :'',\r\n                content1:'',\r\n            }\r\n        };\r\n    }\r\n    componentDidMount(){\r\n        if(this.props.type){\r\n            this.setState({\r\n                ...this.props.type\r\n            })\r\n        }\r\n    \r\n\r\n        $(document).ready(function() {\r\n            $('.form').find('.inputf1').on('keyup blur focus', function (e) {\r\n  \r\n                var $this = $(this),\r\n                    label = $this.prev('.labelf1');\r\n              \r\n                    if (e.type === 'keyup') {\r\n                          if ($this.val() === '') {\r\n                        label.removeClass('active highlight');\r\n                      } else {\r\n                        label.addClass('active highlight');\r\n                      }\r\n                  } else if (e.type === 'blur') {\r\n                      if( $this.val() === '' ) {\r\n                          label.removeClass('active highlight'); \r\n                          } else {\r\n                          label.removeClass('highlight');   \r\n                          }   \r\n                  } else if (e.type === 'focus') {\r\n                    \r\n                    if( $this.val() === '' ) {\r\n                          label.removeClass('highlight'); \r\n                          } \r\n                    else if( $this.val() !== '' ) {\r\n                          label.addClass('highlight');\r\n                          }\r\n                  }\r\n              \r\n              });\r\n              \r\n              function loadingform1(){\r\n                $('.form .inputf1').each(\r\n                    function(){\r\n                        var val = $(this).val().trim();\r\n                        if (val != ''){\r\n                            $(this).prev('.labelf1').addClass('active highlight');\r\n                        }\r\n                    });\r\n              }\r\n         \r\n            loadingform1();\r\n              \r\n        })\r\n    }\r\n\r\n\r\n    handleChange = evt => {\r\n    // This triggers everytime the input is changed\r\n        this.setState({\r\n            [evt.target.name]: evt.target.value,\r\n        });\r\n    };\r\n \r\n    handleChangedetails= evt =>{\r\n        var shopd = this.state.subtype;\r\n        shopd.find(function(e){\r\n             if(e.name == evt.target.name){\r\n                 e.type = evt.target.value;\r\n             }\r\n        });\r\n\r\n        this.setState({\r\n            subtype : shopd\r\n        })\r\n    }\r\n    addnewSubtypes = evt =>{\r\n        if(this.state.newsubtype != ''){\r\n            var shopd = this.state.subtype;\r\n            shopd.push({name:this.state.newsubtype,type:''});\r\n            this.setState({\r\n                subtype : shopd,\r\n                newsubtype : ''\r\n            })\r\n            this.componentDidMount();\r\n        }\r\n     \r\n    }\r\n    deleteDetals = type =>{\r\n\r\n        if(confirm('is it sure remove '+type+'?')){\r\n\r\n        \r\n       var shopd = this.state.subtype;\r\n       shopd.splice(shopd.findIndex(function(e){\r\n        return e.name == type\r\n     \r\n        }),1);\r\n\r\n       this.setState({\r\n        subtype : shopd,\r\n    })\r\n    this.componentDidMount();\r\n    }\r\n\r\n    }\r\n\r\n    validationform=(evt)=>{\r\n        this.checkvalidation(evt.target.name)\r\n\r\n    }\r\n    checkvalidation = (name)=>{\r\n        var form = this.state;\r\n        var validation = this.state.validation;\r\n        switch(name){\r\n            case ('name') : validation.name = \r\n            form.name.length <1 ?  'name cannot be empty.':''\r\n            break;\r\n            case ('type') : validation.type = \r\n            form.type.length <1 ?  'type cannot be empty.':''\r\n            break;\r\n            case ('content1') : validation.content1 = \r\n            form.content1.length <1 ?  'Content cannot be empty.':''\r\n            break;\r\n\r\n        }\r\n        this.setState({\r\n            validation:validation\r\n        })\r\n    }\r\n    beforesubmit=()=>{\r\n        var count = 0;\r\n        Object.entries(this.state.validation).forEach(([key, value]) => {\r\n            \r\n            this.checkvalidation(key);\r\n         });\r\n         Object.entries(this.state.validation).forEach(([key, value]) => {\r\n             if(value!=''){\r\n                 count = count+1;\r\n                 return 1;\r\n             }\r\n          });\r\n          return count;\r\n    }\r\n    handleSubmit = evt => {\r\n        evt.preventDefault();\r\n       //check validations\r\n        if(this.beforesubmit()>0)\r\n        {\r\n            alert('Sorry, cannot Submit form, check again form!.');\r\n        }\r\n        else if (!Cookie.getJSON('user')){\r\n            alert('Sorry, you are not sign in.');\r\n        }\r\n        else{\r\n            const data = new FormData();\r\n            if(this.state.files!=undefined){\r\n                this.state.files.map((x,i)=>{\r\n                    data.append(`image`,x.selectedFile);   \r\n                    })\r\n            }\r\n        \r\n            var jsonbody = this.state;\r\n           // jsonbody.files = null;\r\n           // jsonbody.defaultfilepath = null;\r\n            data.append('jsonbody', JSON.stringify(jsonbody));\r\n            data.append('mainfile',this.state.mainfile);\r\n           data.append('user', JSON.stringify(Cookie.getJSON('user')));\r\n    \r\n            fetch('/api/updateCatagery/'+this.props.typeid,{\r\n                method: 'PUT',\r\n                headers: {\r\n                },\r\n                body:data\r\n            \r\n                }\r\n            )\r\n            .then(response => { return response.json(); } )\r\n            .then(data => { if(data!=undefined){alert(data.msg);}})\r\n            .catch(error => console.log(error))\r\n    \r\n        }\r\n\r\n    \r\n    };\r\n\r\n    mainfileChangeHandler=event=>{\r\n        if(event.target.files[0]){\r\n            this.setState({\r\n                mainfile : event.target.files[0],\r\n                mainfilepath : URL.createObjectURL(event.target.files[0])\r\n            })\r\n        }\r\n\r\n\r\n    }\r\n\r\n    fileChangeHandler=event=>{\r\n\r\n        if(this.state.selectedFilecount>2){\r\n\r\n            var files = this.state.files;\r\n            files.splice(files.findIndex(function(e){\r\n             return e.selectedfilepath == 'https://img.icons8.com/ios/50/01567e/image.png'\r\n          \r\n             }),1);\r\n     \r\n            this.setState({\r\n             files : files,\r\n             selectedFilecount : this.state.selectedFilecount-1\r\n         })\r\n\r\n        }\r\n        \r\n        if(event.target.files[0]!=null){\r\n            var files = this.state.files;\r\n            files.unshift({selectedFile:event.target.files[0],selectedfilepath:URL.createObjectURL(event.target.files[0])});\r\n          \r\n            this.setState({\r\n              files : files,\r\n              selectedFilecount : (this.state.selectedFilecount<3)?this.state.selectedFilecount+1:3\r\n    \r\n            });\r\n            \r\n        }\r\n\r\n     \r\n    }\r\n    deleteFiles = selectedfilepath =>{\r\n\r\n        if(confirm('is it sure remove ?')){\r\n\r\n            if(this.state.selectedFilecount==1){\r\n       \r\n                var files = [{selectedFile:null,selectedfilepath:this.state.defaultfilepath}];\r\n              \r\n                this.setState({\r\n                  files : files,\r\n                  selectedFilecount : 1\r\n        \r\n                });\r\n             }\r\n             else{\r\n                var files = this.state.files;\r\n                files.splice(files.findIndex(function(e){\r\n                 return e.selectedfilepath == selectedfilepath\r\n              \r\n                 }),1);\r\n                 \r\n                this.setState({\r\n                 files : files,\r\n                 selectedFilecount : this.state.selectedFilecount-1\r\n             })\r\n             }\r\n\r\n         }\r\n     \r\n\r\n    }\r\n    \r\n    deleteImagesinDB = x =>{\r\n\r\n        var deleteimages = this.state.deleteimages;\r\n        if(!deleteimages.includes(x))\r\n        { deleteimages.push(x);\r\n            this.setState({\r\n                deleteimages:deleteimages\r\n            })\r\n        }\r\n      \r\n    }\r\n    addImagesinDB = x =>{\r\n        \r\n        var deleteimages = this.state.deleteimages;\r\n        if(deleteimages.includes(x))\r\n        { \r\n            deleteimages.splice(deleteimages.findIndex(e=>e==x),1);\r\n            this.setState({\r\n                deleteimages:deleteimages\r\n            })\r\n        }\r\n\r\n    }\r\n      \r\n\r\n    showsidebar(){\r\n        this.refs.child.showSidebar();\r\n      }\r\n    \r\n    render() { \r\n        \r\n\r\n        //side navbar link\r\n        const sidenavlink = [\r\n            {id:1,link:'/',linkname:'home'},\r\n          ];\r\n          \r\n            const sidenavconst = {topic : 'Categeries',topiclink:'All Categeriess',sidenavlink:sidenavlink,visible:false };\r\n        //////////////\r\n          return ( \r\n            <Layout>\r\n                      <Head>\r\n                <title> {web.wetopic}</title>\r\n          \r\n                </Head>\r\n                <SubNavBar sidenavconst={sidenavconst}/>\r\n\r\n            <div className=\"form-create-shop\">\r\n\r\n                <div className=\"container\" >\r\n                    <h1 className=\"font4 fontsizeE2-25 topicColor d-flex justify-content-center\">Create new Categery</h1>\r\n                    <form className=\"form\">\r\n\r\n                    <div className=\"content\">\r\n                        <h3 className=\"font4 fontsizeE1-5 fontcolorOrange\">new type</h3>\r\n                        <div className=\"row\">\r\n                            <div className=\"field-wrap col-lg-4 col-md-4 col-sm-12\">\r\n                                <label  className=\"font2 labelf1\">name<span className=\"req\">*</span></label>\r\n                                <input className={'font6 inputf1 '+(this.state.validation.name!=''?'input-error':'')} type=\"text\" required  name=\"name\" value={this.state.name} onChange={this.handleChange} onBlur={this.validationform}/>\r\n                                <span className=\"form-error\">{this.state.validation.name}</span>\r\n                            </div>\r\n                            <div className=\"field-wrap col-lg-4 col-md-4 col-sm-12\">\r\n                                <label  className=\"font2 labelf1\">type<span className=\"req\">*</span></label>\r\n                                <input className={'font6 inputf1 '+(this.state.validation.type!=''?'input-error':'')} type=\"text\" required  name=\"type\" value={this.state.type} onChange={this.handleChange} onBlur={this.validationform}/>\r\n                                <span className=\"form-error\">{this.state.validation.type}</span>\r\n                            </div>\r\n                            <div className=\"field-wrap col-lg-12 col-sm-12\">\r\n                                <label  className=\"font2 labelf1\">details<span className=\"req\">*</span></label>\r\n                                <textarea className={'font6 inputf1 '+(this.state.validation.content1!=''?'input-error':'')}  rows=\"3\" required  name=\"content1\" value={this.state.content1} onChange={this.handleChange} onBlur={this.validationform}/>\r\n                                <span className=\"form-error\">{this.state.validation.content1}</span>\r\n                            </div>\r\n                           \r\n                        </div>\r\n           \r\n                    \r\n        \r\n                         {/* sub items details */}\r\n                        <hr></hr>\r\n                        <div className=\"content\">\r\n                        <h3 className=\"font4 fontsizeE1-5 fontcolorOrange\">Sub type</h3>\r\n                        <div className=\"col-12\">\r\n                        <div className=\" field-wrap col-lg-6 col-md-6 col-sm-12\">\r\n                                <div className=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\r\n                                <input type=\"text\" className='font6 inputf1 '  required  name=\"newsubtype\" value={this.state.newsubtype} onChange={this.handleChange} onBlur={this.validationform}/>       \r\n                                <button type=\"button\" className=\"font6  btn btn-addnewshop\"  required  name=\"newsubtype\" onClick={this.addnewSubtypes} > new+ </button>\r\n                                </div>\r\n                        </div>\r\n                        <span>If you need add more field as your details of subtype</span>\r\n                        </div>\r\n                        <div className=\"row\">\r\n                        {this.state.subtype.map((x,i)=>(\r\n                            <div key={i} className=\"field-wrap col-lg-4 col-md-4 col-sm-12\">\r\n                            <div className=\"popup-close-1\" onClick={()=>this.deleteDetals(x.name)} display='none' >x</div>\r\n                            <label  className=\"font2 labelf1\">{x.name}</label>\r\n                            <input className='font6 inputf1' type=\"text\" required  name={x.name} value={x.type} onChange={this.handleChangedetails} />\r\n                        </div>\r\n                        )\r\n\r\n                        )}\r\n                        </div>\r\n\r\n                        </div>\r\n                        <hr/>\r\n                        <div className=\"content\">\r\n                        <h3 className=\"font4 fontsizeE1-5 fontcolorOrange\">cover images for shop</h3>\r\n                        <div className=\" row col-12\">\r\n                     \r\n                          <div  className=\" field-wrap col-lg-4 col-md-4 col-sm-12\">\r\n                          <div className=\"imageupload d-flex justify-content-center\">\r\n                          <div className=\"popup-close-2\">x</div>\r\n                          <img className=\"align-self-center\" width={this.state.mainfilepath!=this.state.defaultfilepath?'100%':null} src={this.state.mainfilepath}/>\r\n                          <input className=\"imageupload-input\" type=\"file\" required   onChange={this.mainfileChangeHandler} />\r\n                          </div>\r\n                        </div>  \r\n                   \r\n                        </div>\r\n    \r\n                        </div>\r\n\r\n                              {/* file upload */}\r\n                              <hr/>\r\n                          <div className=\"content\">\r\n                        <h3 className=\"font4 fontsizeE1-5 fontcolorOrange\">cover images for shop</h3>\r\n                        <div className=\" row col-12\">\r\n                        {this.state.files.map((x,i)=>(\r\n                          <div key={i} className=\" field-wrap col-lg-4 col-md-4 col-sm-12\">\r\n                          <div className=\"imageupload d-flex justify-content-center\">\r\n                          <div className=\"popup-close-2\" onClick={()=>this.deleteFiles(x.selectedfilepath)}>x</div>\r\n                          <img className=\"align-self-center\" width={x.selectedfilepath!=this.state.defaultfilepath?'100%':null} src={x.selectedfilepath}/>\r\n                          <input className=\"imageupload-input\" type=\"file\" required  value={x.file} onChange={this.fileChangeHandler} />\r\n                          </div>\r\n                        </div>  \r\n                        ))}\r\n                        </div>\r\n    \r\n                        </div>\r\n                  \r\n                    \r\n                    </div>\r\n\r\n                        {/* file remove */}\r\n                        <hr/>\r\n                          <div className=\"content\">\r\n                        <h3 className=\"font4 fontsizeE1-5 fontcolorOrange\">what should be removed</h3>\r\n                        <div className=\" row col-12\">\r\n                        {this.state.images.map((x,i)=>(\r\n                          <div key={i} className={'field-wrap col-lg-4 col-md-4 col-sm-12'}>\r\n                          <div  className={this.state.deleteimages.includes(x)?'imageupload d-flex justify-content-center remove-image':'imageupload d-flex justify-content-center'}>\r\n\r\n                          {!this.state.deleteimages.includes(x)?\r\n                          <div className=\"popup-close-3\" onClick={()=>this.deleteImagesinDB(x)}> remove</div>:\r\n                        <div className=\"popup-close-3\" onClick={()=>this.addImagesinDB(x)}> add</div>\r\n                          }            \r\n\r\n                          <img className=\"align-self-center\" width={x!=this.state.defaultfilepath?'100%':null} src={ImageUrl+x}/>\r\n                         </div>\r\n                        </div>  \r\n                        ))}\r\n                        </div>\r\n    \r\n                        </div>\r\n\r\n                    <div className=\"d-flex justify-content-end\">\r\n                    <button type=\"button\" className=\"font6  btn btn-submit \"  required  name=\"newsubtype\" onClick={this.handleSubmit} > Submit </button>\r\n                    </div>\r\n                    </form>\r\n                </div>\r\n\r\n            </div>\r\n\r\n<style jsx>\r\n{`\r\n.imageupload{\r\n    background: #c2d1e17d;\r\n    height:200px;\r\n    border: 1.5px solid #01567e;\r\n    overflow: hidden;\r\n    margin-top:2rem;\r\n}\r\n.imageupload-input{\r\n    position: absolute;\r\n    font-size: 1px;\r\n    cursor: pointer;\r\n    opacity: 0;\r\n    height:100%;\r\n    width:80%;\r\n}\r\n.popup-close-1 {\r\n\tcolor: white;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tbackground: #01567e;\r\n\tcursor: pointer;\r\n\tfont-size: 0.6rem;\r\n\twidth: 1.2rem;\r\n\theight: 1.2rem;\r\n\ttop: 2.2rem;\r\n\tright: 1rem;\r\n\tposition: absolute;\r\n    border-radious:100%;\r\n}\r\n.popup-close-2 {\r\n\tcolor: white;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tbackground: #01567e;\r\n\tcursor: pointer;\r\n\tfont-size: 0.6rem;\r\n\twidth: 1.5rem;\r\n\theight: 1.5rem;\r\n\ttop: 2.1rem;\r\n\tright: 1rem;\r\n\tposition: absolute;\r\n\r\n}\r\n.form-create-shop {\r\n    background: #8b8b8ba8;\r\n}\r\n.container{\r\n    \r\n    /*background: #dde1ffbf  ;*/\r\n    background-image: url(\"/form1.jpg\");\r\n    background-repeat: no-repeat; /* Do not repeat the image */\r\n    padding : 20px 10px;\r\n    opacity:1.1;\r\n   \r\n}\r\n.labelf1 {\r\n    position: relative;\r\n    transform: translateY(40px);\r\n    left: 1em;\r\n    color: #01567e;\r\n    transition: all 0.25s ease;\r\n    -webkit-backface-visibility: hidden;\r\n    pointer-events: none;\r\n    font-size: 1.1em;\r\n}\r\n.labelf1 .req {\r\n    margin: 2px;\r\n    color: #01567e;\r\n}\r\n.labelf1.active {\r\n    left: 1em;\r\n    transform: translateY(0.5em);\r\n    font-size: 1em;\r\n}\r\n.labelf1.active .req {\r\n    opacity: 0;\r\n}\r\n.labelf1.highlight {\r\n    color: #023957;\r\n}\r\n.inputf1 {\r\n    font-size: 1.1em;\r\n    display: block;\r\n    width: 100%;\r\n    padding: 0.5em 0.7em;\r\n    background: #c2d1e17d;\r\n    background-image: none;\r\n    border: none;\r\n    border: 1.5px solid #01567e;\r\n    color: darkblue;\r\n    border-radius: 0;\r\n    transition: border-color 0.5s ease;\r\n}\r\n.inputf1:focus, textarea:focus {\r\n    outline: 0;\r\n    border-color: #023957;\r\n}\r\ntextarea {\r\n    resize: vertical;\r\n}\r\n.field-wrap {\r\n    position: relative;\r\n\r\n}\r\n.btn-addnewshop{\r\n    background: #01567e;\r\n    color:white; \r\n}\r\n.btn-submit{\r\n    background: #01567e;\r\n    color:white; \r\n    width:100%;\r\n    margin-top: 3rem;\r\n}\r\n.form-error{\r\n    color : red;\r\n    font-size : 0.8rem;\r\n}\r\n.input-error{\r\n    border-color: red;\r\n}\r\n`}\r\n</style>\r\n                   \r\n            <Footer/>\r\n                   </Layout>\r\n           );\r\n      }\r\n    \r\n}\r\n\r\n\r\nIndex.getInitialProps = async function(context) {\r\n    const { id } = context.query;\r\n    \r\n    const res = await fetch(`${Url}typebyid/${id}`);\r\n    var  types = await res.json();\r\n    var error = false;\r\n    if(res.status!=200){\r\n        error = true ;\r\n   }\r\n  console.log(types)\r\n    return {typeid:id,type:types[0],error}\r\n\r\n\r\n  }\r\n\r\nexport default Index; \r\n"]},"metadata":{},"sourceType":"module"}