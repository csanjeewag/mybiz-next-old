{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport { Form } from 'semantic-ui-react';\nimport { connect } from 'react-redux';\nimport { addPhotoToUser } from './helpers.js';\n\nvar PicUploadNoCrop = /*#__PURE__*/function (_Component) {\n  _inherits(PicUploadNoCrop, _Component);\n\n  function PicUploadNoCrop() {\n    var _this;\n\n    _classCallCheck(this, PicUploadNoCrop);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PicUploadNoCrop).call(this));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleFile\", function (e) {\n      _this.setState({\n        photoFile: e.target.files[0]\n      });\n\n      var file = e.target.files[0];\n      var fileReader = new FileReader();\n\n      fileReader.onloadend = function () {\n        _this.setState({\n          photoFile: file,\n          photoUrl: fileReader.result\n        });\n      };\n\n      if (file) {\n        fileReader.readAsDataURL(file);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\", function (e) {\n      e.preventDefault();\n      var formData = new FormData();\n      formData.append('user[id]', _this.props.currentUser.id);\n      formData.append('user[profile_pic]', _this.state.photoFile);\n      addPhotoToUser(_this.props.currentUser, formData);\n    });\n\n    _this.state = {\n      photoFile: null,\n      photoUrl: null\n    };\n    return _this;\n  }\n\n  _createClass(PicUploadNoCrop, [{\n    key: \"render\",\n    value: function render() {\n      var preview = this.state.photoUrl ? __jsx(\"img\", {\n        src: this.state.photoUrl,\n        alt: \"preview\"\n      }) : null;\n      return __jsx(Form, {\n        onSubmit: this.handleSubmit\n      }, __jsx(\"input\", {\n        type: \"file\",\n        id: \"profile_pic\",\n        value: this.state.profile_pic,\n        onChange: this.handleFile\n      }), preview, __jsx(\"button\", null, \"save\"));\n    }\n  }]);\n\n  return PicUploadNoCrop;\n}(Component);\n\nvar mapSTP = function mapSTP(state) {\n  return {\n    currentUser: state.currentUser\n  };\n};\n\nexport default connect(mapSTP)(PicUploadNoCrop);","map":{"version":3,"sources":["D:/Web-project/myapp/pages/menu5.js"],"names":["React","Component","Form","connect","addPhotoToUser","PicUploadNoCrop","e","setState","photoFile","target","files","file","fileReader","FileReader","onloadend","photoUrl","result","readAsDataURL","preventDefault","formData","FormData","append","props","currentUser","id","state","preview","handleSubmit","profile_pic","handleFile","mapSTP"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,QAAqB,mBAArB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,cAAT,QAA+B,cAA/B;;IAEMC,e;;;AAEF,6BAAc;AAAA;;AAAA;;AACV;;AADU,iEAQD,UAAAC,CAAC,EAAI;AACd,YAAKC,QAAL,CAAc;AAACC,QAAAA,SAAS,EAAEF,CAAC,CAACG,MAAF,CAASC,KAAT,CAAe,CAAf;AAAZ,OAAd;;AACA,UAAMC,IAAI,GAAGL,CAAC,CAACG,MAAF,CAASC,KAAT,CAAe,CAAf,CAAb;AACA,UAAME,UAAU,GAAG,IAAIC,UAAJ,EAAnB;;AACAD,MAAAA,UAAU,CAACE,SAAX,GAAuB,YAAM;AACzB,cAAKP,QAAL,CAAc;AAACC,UAAAA,SAAS,EAAEG,IAAZ;AAAkBI,UAAAA,QAAQ,EAAEH,UAAU,CAACI;AAAvC,SAAd;AACH,OAFD;;AAIA,UAAGL,IAAH,EAAS;AACLC,QAAAA,UAAU,CAACK,aAAX,CAAyBN,IAAzB;AACH;AACJ,KAnBa;;AAAA,mEAqBC,UAAAL,CAAC,EAAI;AAChBA,MAAAA,CAAC,CAACY,cAAF;AACA,UAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,MAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4B,MAAKC,KAAL,CAAWC,WAAX,CAAuBC,EAAnD;AACAL,MAAAA,QAAQ,CAACE,MAAT,CAAgB,mBAAhB,EAAqC,MAAKI,KAAL,CAAWjB,SAAhD;AACAJ,MAAAA,cAAc,CAAC,MAAKkB,KAAL,CAAWC,WAAZ,EAAyBJ,QAAzB,CAAd;AACH,KA3Ba;;AAEV,UAAKM,KAAL,GAAa;AACTjB,MAAAA,SAAS,EAAE,IADF;AAETO,MAAAA,QAAQ,EAAE;AAFD,KAAb;AAFU;AAMb;;;;6BAuBQ;AACL,UAAMW,OAAO,GAAG,KAAKD,KAAL,CAAWV,QAAX,GAAsB;AAAK,QAAA,GAAG,EAAE,KAAKU,KAAL,CAAWV,QAArB;AAA+B,QAAA,GAAG,EAAC;AAAnC,QAAtB,GAAuE,IAAvF;AAEA,aACI,MAAC,IAAD;AAAM,QAAA,QAAQ,EAAE,KAAKY;AAArB,SACI;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,EAAE,EAAC,aAAtB;AAAoC,QAAA,KAAK,EAAE,KAAKF,KAAL,CAAWG,WAAtD;AACA,QAAA,QAAQ,EAAE,KAAKC;AADf,QADJ,EAGKH,OAHL,EAII,6BAJJ,CADJ;AAQH;;;;EA1CyBzB,S;;AA6C9B,IAAM6B,MAAM,GAAG,SAATA,MAAS,CAAAL,KAAK,EAAI;AACpB,SAAO;AAACF,IAAAA,WAAW,EAAEE,KAAK,CAACF;AAApB,GAAP;AACH,CAFD;;AAIA,eAAepB,OAAO,CAAC2B,MAAD,CAAP,CAAgBzB,eAAhB,CAAf","sourcesContent":["import React, { Component } from 'react'\r\nimport { Form } from 'semantic-ui-react'\r\nimport { connect } from 'react-redux'\r\nimport { addPhotoToUser } from './helpers.js'\r\n\r\nclass PicUploadNoCrop extends Component {\r\n\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            photoFile: null,\r\n            photoUrl: null\r\n        }\r\n    }\r\n\r\n    handleFile = e => {\r\n        this.setState({photoFile: e.target.files[0]})\r\n        const file = e.target.files[0]\r\n        const fileReader = new FileReader()\r\n        fileReader.onloadend = () => {\r\n            this.setState({photoFile: file, photoUrl: fileReader.result})\r\n        }   \r\n\r\n        if(file) {\r\n            fileReader.readAsDataURL(file)\r\n        }\r\n    }\r\n\r\n    handleSubmit = e => {\r\n        e.preventDefault()\r\n        const formData = new FormData()\r\n        formData.append('user[id]', this.props.currentUser.id)\r\n        formData.append('user[profile_pic]', this.state.photoFile)\r\n        addPhotoToUser(this.props.currentUser, formData)\r\n    }\r\n\r\n    render() {\r\n        const preview = this.state.photoUrl ? <img src={this.state.photoUrl} alt='preview'/> : null\r\n    \r\n        return (\r\n            <Form onSubmit={this.handleSubmit}>\r\n                <input type='file' id='profile_pic' value={this.state.profile_pic} \r\n                onChange={this.handleFile} />\r\n                {preview}\r\n                <button>save</button>\r\n            </Form>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapSTP = state => {\r\n    return {currentUser: state.currentUser}\r\n}\r\n\r\nexport default connect(mapSTP)(PicUploadNoCrop)"]},"metadata":{},"sourceType":"module"}